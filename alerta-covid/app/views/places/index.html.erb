<p id="notice"><%= notice %></p>

<div class="container-fluid">
  <h1 class="title">Places</h1>

  <div class="table-responsive mt-2">
    <table class="table table-hover">
      <thead class="thead-light">
        <tr class="d-flex">
          <th class="col-3">Name</th>
          <th class="col-3">Area</th>
          <%if user_signed_in? %>
            <th colspan="2" width="100%"></th>
          <%end%>
        </tr>
      </thead>

      <tbody>
        <% @places.each do |place| %>
          <tr class="d-flex">
            <td class="col-3"><%= place.name %></td>
            <td class="col-3"><%= place.area.name %></td>
            <td class="col-4">
              <%= link_to 'Show', place, class: "show-button" %>
              <% if user_signed_in? && place.area.institution_id == @current_institution.id || current_user.super_admin?%>
                <%= link_to 'Edit', edit_place_path(place), class: "edit-button" %>
                <%= link_to 'Destroy', place, method: :delete, data: { confirm: 'Are you sure?' }, class: "destroy-button" %>
              <%end%>
            </td>
            <% if place.are_there_active_cases?%>
              <td class="col-2"><p class="active-cases-tag"><%= place.active_cases_teen_days_ago %> active cases</p></td>
            <%end%>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  
  <% if user_signed_in?%>
    <%= link_to 'New Place', new_place_path, class: "new-button" %>
  <% end%>
</div>